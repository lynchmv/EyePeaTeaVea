services:
  redis:
    image: redis:7-alpine
    hostname: redis
    ports:
      - "6381:6379"
    volumes:
      - redis_data:/data
    networks:
      - eyepeateavea_network

  app:
    build:
      context: .
      args:
        CLONE_TV_LOGOS: ${CLONE_TV_LOGOS:-false}  # Set CLONE_TV_LOGOS=true in .env or pass via command line
    ports:
      - "8020:8020"
    environment:
      REDIS_URL: redis://redis:6379/0
      HOST_URL: https://stremio-dev.lynuxss.com
      # TV_LOGOS_REPO_PATH is set in Dockerfile, but can be overridden here if needed
      # TV_LOGOS_REPO_PATH: /app/tv-logos
      # Disable SSL verification for problematic CDNs (set via .env)
      DISABLE_SSL_VERIFY: ${DISABLE_SSL_VERIFY:-true}
      # ADDON_PASSWORD: your_addon_password # Uncomment and set in .env for production
    depends_on:
      - redis
    networks:
      - eyepeateavea_network

volumes:
  redis_data:

networks:
  eyepeateavea_network:
    driver: bridge
